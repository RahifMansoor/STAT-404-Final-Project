"0","# Set parameters"
"0","p1 <- 0.7  # probability for group 1"
"0","p2 <- 0.5  # probability for group 2"
"0","n <- 50    # sample size per group"
"0","reps <- 1000  # number of repetitions"
"0",""
"0","# 1. Generate data"
"0","set.seed(456)  # for reproducibility"
"0","data <- sim_binary_data(p1, p2, n, n)"
"0",""
"0","# 2. Calculate observed difference and SE"
"0","results <- calc_prop_diff(data)"
"0","cat(""Observed difference:"", round(results$diff, 3), ""\n"")"
"1","Observed difference:"
"1"," "
"1","0.08"
"1"," "
"1","
"
"0","cat(""Standard error:"", round(results$se, 3), ""\n"")"
"1","Standard error:"
"1"," "
"1","0.098"
"1"," "
"1","
"
"0","# 3. Perform permutation test"
"0","perm_results <- permutation_test(data, reps)"
"0","p_value <- mean(abs(perm_results$null_dist) >= abs(perm_results$obs_stat))"
"0","cat(""Permutation test p-value:"", round(p_value, 3), ""\n"")"
"1","Permutation test p-value:"
"1"," "
"1","0.559"
"1"," "
"1","
"
"0","# 4. Calculate bootstrap confidence interval"
"0","boot_samples <- bootstrap_samples(data, reps)"
"0","boot_ci <- quantile(boot_samples, c(0.025, 0.975))"
"0","cat(""Bootstrap 95% CI: ("", round(boot_ci[1], 3), "","", round(boot_ci[2], 3), "")\n"")"
"1","Bootstrap 95% CI: ("
"1"," "
"1","-0.117"
"1"," "
"1",","
"1"," "
"1","0.265"
"1"," "
"1",")
"
"0","# Visualize all aspects"
"0","par(mfrow = c(2,2))"
"0",""
"0","# Sampling distribution"
"0","plot_sampling_dist(c(n), p1, p2, reps)"
